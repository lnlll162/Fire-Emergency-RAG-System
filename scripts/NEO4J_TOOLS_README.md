# Neo4jç®¡ç†å·¥å…·è¯´æ˜

## ğŸ“ å·¥å…·æ¸…å•

æœ¬ç›®å½•åŒ…å«4ä¸ªNeo4jç®¡ç†å·¥å…·ï¼Œç”¨äºç¡®ä¿Neo4jå®¹å™¨ç¨³å®šè¿è¡Œã€‚

### 1. fix_neo4j_permanent.bat â­ æ¨è
**ç”¨é€”ï¼š** æ°¸ä¹…ä¿®å¤Neo4jé—®é¢˜ï¼Œå½»åº•è§£å†³"already running"é”™è¯¯

**é€‚ç”¨åœºæ™¯ï¼š**
- Neo4jå¯åŠ¨å¤±è´¥
- å®¹å™¨çŠ¶æ€å¼‚å¸¸
- å¥åº·æ£€æŸ¥ä¸é€šè¿‡
- å‡ºç°ä»»ä½•é”™è¯¯

**åŠŸèƒ½ï¼š**
- å®‰å…¨åœæ­¢å¹¶ç§»é™¤æ—§å®¹å™¨
- å¯é€‰æ¸…ç†æŸåçš„æ•°æ®å·
- ä½¿ç”¨ä¼˜åŒ–é…ç½®é‡å»ºå®¹å™¨
- è‡ªåŠ¨éªŒè¯ä¿®å¤ç»“æœ

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
cd "D:\Fire Emergency RAG System"
.\scripts\fix_neo4j_permanent.bat
```

**æ‰§è¡Œæ—¶é—´ï¼š** çº¦1-2åˆ†é’Ÿ

---

### 2. start_neo4j_safe.bat
**ç”¨é€”ï¼š** å®‰å…¨å¯åŠ¨Neo4jï¼Œå¸¦é¢„æ£€æŸ¥å’Œè‡ªåŠ¨æ¸…ç†

**é€‚ç”¨åœºæ™¯ï¼š**
- æ—¥å¸¸å¯åŠ¨Neo4j
- ç³»ç»Ÿé‡å¯åå¯åŠ¨
- å®¹å™¨å¼‚å¸¸åé‡å¯

**åŠŸèƒ½ï¼š**
- DockerçŠ¶æ€æ£€æŸ¥
- ç«¯å£å ç”¨æ£€æŸ¥
- æ™ºèƒ½PIDæ¸…ç†
- æ¸è¿›å¼å¥åº·éªŒè¯
- è¯¦ç»†çŠ¶æ€æŠ¥å‘Š

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
cd "D:\Fire Emergency RAG System"
.\scripts\start_neo4j_safe.bat
```

**æ‰§è¡Œæ—¶é—´ï¼š** çº¦30-60ç§’

---

### 3. check_neo4j_status.bat
**ç”¨é€”ï¼š** ä¸€é”®æ£€æŸ¥Neo4jæ‰€æœ‰å…³é”®æŒ‡æ ‡

**é€‚ç”¨åœºæ™¯ï¼š**
- æ¯æ—¥ä½¿ç”¨å‰æ£€æŸ¥
- å¿«é€Ÿè¯Šæ–­é—®é¢˜
- éªŒè¯ä¿®å¤ç»“æœ
- å®šæœŸå¥åº·æ£€æŸ¥

**åŠŸèƒ½ï¼š**
- DockeræœåŠ¡çŠ¶æ€
- å®¹å™¨å­˜åœ¨æ€§å’Œè¿è¡ŒçŠ¶æ€
- å¥åº·æ£€æŸ¥çŠ¶æ€
- HTTP/Boltæ¥å£è¿é€šæ€§
- CPUå’Œå†…å­˜ä½¿ç”¨æƒ…å†µ
- é”™è¯¯æ—¥å¿—æ‰«æ

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
cd "D:\Fire Emergency RAG System"
.\scripts\check_neo4j_status.bat
```

**æ‰§è¡Œæ—¶é—´ï¼š** çº¦5-10ç§’

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
========================================
Neo4jå®¹å™¨çŠ¶æ€æ£€æŸ¥
========================================

[1/6] æ£€æŸ¥DockeræœåŠ¡...
[V] Dockeræ­£å¸¸è¿è¡Œ

[2/6] æ£€æŸ¥å®¹å™¨å­˜åœ¨æ€§...
[V] å®¹å™¨å­˜åœ¨

[3/6] æ£€æŸ¥å®¹å™¨è¿è¡ŒçŠ¶æ€...
[V] å®¹å™¨æ­£åœ¨è¿è¡Œ

[4/6] æ£€æŸ¥å¥åº·çŠ¶æ€...
[V] å®¹å™¨å¥åº·

[5/6] æµ‹è¯•HTTPæ¥å£ (7474)...
[V] HTTPæ¥å£æ­£å¸¸

[6/6] æµ‹è¯•Boltæ¥å£ (7687)...
[V] Boltç«¯å£æ­£å¸¸

========================================
çŠ¶æ€: ä¸€åˆ‡æ­£å¸¸ï¼
========================================
```

---

### 4. monitor_neo4j.bat
**ç”¨é€”ï¼š** æŒç»­ç›‘æ§Neo4jçŠ¶æ€ï¼ˆæ¯5åˆ†é’Ÿï¼‰

**é€‚ç”¨åœºæ™¯ï¼š**
- é•¿æœŸè¿è¡Œç›‘æ§
- å¼€å‘ç¯å¢ƒåå°ç›‘æ§
- é—®é¢˜é¢„è­¦

**åŠŸèƒ½ï¼š**
- å®šæ—¶è‡ªåŠ¨æ£€æŸ¥ï¼ˆ5åˆ†é’Ÿé—´éš”ï¼‰
- å®æ—¶é”™è¯¯æ£€æµ‹
- èµ„æºä½¿ç”¨ç›‘æ§
- å¼‚å¸¸è‡ªåŠ¨å‘Šè­¦

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
cd "D:\Fire Emergency RAG System"
.\scripts\monitor_neo4j.bat
```

**åœæ­¢ç›‘æ§ï¼š** æŒ‰ Ctrl+C

**æ‰§è¡Œæ—¶é—´ï¼š** æŒç»­è¿è¡Œç›´åˆ°æ‰‹åŠ¨åœæ­¢

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
========================================
Neo4jå®¹å™¨å¥åº·ç›‘æ§
========================================

[2025-10-25 14:30] æ£€æŸ¥ä¸­...
[æ­£å¸¸] Neo4jå®¹å™¨è¿è¡Œæ­£å¸¸ä¸”å¥åº·
[æ­£å¸¸] HTTPæ¥å£å¯è®¿é—®
[èµ„æº] CPU: 0.47% | MEM: 929MiB / 7.621GiB

ä¸‹æ¬¡æ£€æŸ¥: 5åˆ†é’Ÿå...
----------------------------------------
```

---

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### æ¨èä½¿ç”¨æµç¨‹

#### åœºæ™¯1ï¼šæ—¥å¸¸å¯åŠ¨
```bash
# 1. ä½¿ç”¨å®‰å…¨å¯åŠ¨è„šæœ¬
.\scripts\start_neo4j_safe.bat

# 2. æ£€æŸ¥çŠ¶æ€ç¡®è®¤
.\scripts\check_neo4j_status.bat
```

#### åœºæ™¯2ï¼šé‡åˆ°é—®é¢˜
```bash
# 1. è¿è¡Œæ°¸ä¹…ä¿®å¤ï¼ˆæ¨èï¼‰
.\scripts\fix_neo4j_permanent.bat

# 2. éªŒè¯ä¿®å¤ç»“æœ
.\scripts\check_neo4j_status.bat
```

#### åœºæ™¯3ï¼šé•¿æœŸç›‘æ§
```bash
# å¯åŠ¨ç›‘æ§ï¼ˆä¿æŒçª—å£æ‰“å¼€ï¼‰
.\scripts\monitor_neo4j.bat
```

---

## ğŸ” å¸¸è§é—®é¢˜

### Q1: åº”è¯¥ä½¿ç”¨å“ªä¸ªè„šæœ¬ï¼Ÿ

**æ—¥å¸¸ä½¿ç”¨ï¼š**
- å¯åŠ¨ï¼š`start_neo4j_safe.bat`
- æ£€æŸ¥ï¼š`check_neo4j_status.bat`

**é‡åˆ°é—®é¢˜ï¼š**
- é¦–é€‰ï¼š`fix_neo4j_permanent.bat`
- å¤‡é€‰ï¼š`start_neo4j_safe.bat`

**ç›‘æ§éœ€æ±‚ï¼š**
- ä½¿ç”¨ï¼š`monitor_neo4j.bat`

### Q2: fix_neo4j_permanent.batä¼šä¸¢å¤±æ•°æ®å—ï¼Ÿ

**é»˜è®¤ä¸ä¼šä¸¢å¤±æ•°æ®ã€‚** è„šæœ¬ä¼šè¯¢é—®æ˜¯å¦æ¸…ç†æ•°æ®å·ã€‚

- é€‰æ‹© `n`ï¼ˆé»˜è®¤ï¼‰ï¼šä¿ç•™æ‰€æœ‰æ•°æ®
- é€‰æ‹© `y`ï¼šæ¸…ç†æ•°æ®ï¼ˆç”¨äºæµ‹è¯•ç¯å¢ƒé‡ç½®ï¼‰

### Q3: è„šæœ¬æ‰§è¡Œå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**æ£€æŸ¥æ­¥éª¤ï¼š**
1. ç¡®ä¿Docker Desktopè¿è¡Œ
2. ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡ŒCMD/PowerShell
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š`docker logs fire_emergency_neo4j`

### Q4: å¦‚ä½•éªŒè¯Neo4jå®Œå…¨æ­£å¸¸ï¼Ÿ

```bash
# è¿è¡ŒçŠ¶æ€æ£€æŸ¥å·¥å…·
.\scripts\check_neo4j_status.bat

# åº”è¯¥çœ‹åˆ°æ‰€æœ‰æ£€æŸ¥é¡¹éƒ½æ˜¯ [V]
# æœ€åæ˜¾ç¤º"çŠ¶æ€: ä¸€åˆ‡æ­£å¸¸ï¼"
```

### Q5: å¤šä¹…åº”è¯¥æ£€æŸ¥ä¸€æ¬¡Neo4jçŠ¶æ€ï¼Ÿ

**å»ºè®®ï¼š**
- æ¯å¤©ä½¿ç”¨å‰ï¼šè¿è¡Œ `check_neo4j_status.bat`
- å¼€å‘æœŸé—´ï¼šå¯é€‰è¿è¡Œ `monitor_neo4j.bat`
- é‡åˆ°é—®é¢˜æ—¶ï¼šå…ˆè¿è¡Œ `check_neo4j_status.bat` è¯Šæ–­

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

### è¯¦ç»†æ–‡æ¡£
- **å®Œæ•´æ•…éšœæ’é™¤æŒ‡å—ï¼š** `docs/neo4j_troubleshooting.md`
- **è§£å†³æ–¹æ¡ˆæ€»ç»“ï¼š** `docs/neo4j_solution_summary.md`
- **ç³»ç»Ÿå¯åŠ¨æŒ‡å—ï¼š** `docs/startup_guide.md`

### é…ç½®æ–‡ä»¶
- **Docker Composeé…ç½®ï¼š** `infrastructure/docker/docker-compose.yml`
- **ç¯å¢ƒå˜é‡ï¼š** `infrastructure/docker/.env`

### Neo4jè®¿é—®
- **æµè§ˆå™¨ç•Œé¢ï¼š** http://localhost:7474
- **ç”¨æˆ·åï¼š** neo4j
- **å¯†ç ï¼š** password

---

## ğŸ†˜ è·å–å¸®åŠ©

å¦‚æœé‡åˆ°å·¥å…·æ— æ³•è§£å†³çš„é—®é¢˜ï¼š

1. **æ”¶é›†è¯Šæ–­ä¿¡æ¯ï¼š**
```bash
# å¯¼å‡ºå®Œæ•´æ—¥å¿—
docker logs fire_emergency_neo4j > neo4j_full_log.txt

# å¯¼å‡ºè¯Šæ–­ä¿¡æ¯
.\scripts\check_neo4j_status.bat > diagnosis.txt
docker ps -a >> diagnosis.txt
docker volume ls >> diagnosis.txt
```

2. **æŸ¥é˜…æ–‡æ¡£ï¼š**
- é˜…è¯» `docs/neo4j_troubleshooting.md`
- æŸ¥çœ‹ `docs/neo4j_solution_summary.md`

3. **å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š**
- Neo4jæ–‡æ¡£ï¼šhttps://neo4j.com/docs/
- Dockeræ–‡æ¡£ï¼šhttps://docs.docker.com/

---

## ğŸ”„ æ›´æ–°å†å²

### v1.0 (2025-10-25)
- âœ… åˆ›å»º4ä¸ªNeo4jç®¡ç†å·¥å…·
- âœ… å½»åº•è§£å†³"already running"é—®é¢˜
- âœ… å®Œå–„æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—

---

**æœ€åæ›´æ–°ï¼š** 2025-10-25  
**ç»´æŠ¤çŠ¶æ€ï¼š** ç§¯æç»´æŠ¤ âœ…

